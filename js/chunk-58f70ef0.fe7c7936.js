(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58f70ef0"],{"075c":function(t,e,o){"use strict";o("a78e")},1218:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Comment"),o("Pagination")],1)},i=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[-1===t.parentCommentId?o("CommentForm"):t._e(),o("h3",{staticClass:"ui dividing header"},[t._v("Comments | 共 "+t._s(t.allComment)+" 条评论"),0!==t.closeComment?o("span",[t._v("（"+t._s(t.closeComment)+" 条评论被隐藏）")]):t._e()]),0===t.allComment?o("h3",{staticClass:"ui header"},[t._v("快来抢沙发！")]):t._e(),t._l(t.comments,(function(e){return o("div",{key:e.id,staticClass:"comment"},[o("span",{staticClass:"anchor",attrs:{id:"comment-"+e.id}}),o("a",{staticClass:"ui circular image avatar"},[o("img",{attrs:{src:e.avatar}})]),o("div",{staticClass:"content"},[o("a",{staticClass:"nickname",attrs:{href:""!=e.website&&null!=e.website?e.website:null,target:"_blank",rel:"external nofollow noopener"}},[t._v(t._s(e.nickname))]),e.adminComment?o("div",{staticClass:"ui black left pointing label"},[t._v(t._s(t.$store.state.siteInfo.commentAdminFlag))]):t._e(),o("div",{staticClass:"metadata"},[o("strong",{staticClass:"date"},[t._v(t._s(t._f("dateFormat")(e.createTime,"YYYY-MM-DD HH:mm")))])]),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.setReply(e.id)}}},[t._v("回复")]),o("div",{staticClass:"text",domProps:{innerHTML:t._s(e.content)}})],1),e.replyComments.length>0?o("div",{staticClass:"comments"},t._l(e.replyComments,(function(e){return o("div",{key:e.id,staticClass:"comment"},[o("span",{staticClass:"anchor",attrs:{id:"comment-"+e.id}}),o("a",{staticClass:"ui circular image avatar"},[o("img",{attrs:{src:e.avatar}})]),o("div",{staticClass:"content"},[o("a",{staticClass:"nickname",attrs:{href:""!=e.website&&null!=e.website?e.website:null,target:"_blank",rel:"external nofollow noopener"}},[t._v(t._s(e.nickname))]),e.adminComment?o("div",{staticClass:"ui black left pointing label"},[t._v(t._s(t.$store.state.siteInfo.commentAdminFlag))]):t._e(),o("div",{staticClass:"metadata"},[o("strong",{staticClass:"date"},[t._v(t._s(t._f("dateFormat")(e.createTime,"YYYY-MM-DD HH:mm")))])]),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.setReply(e.id)}}},[t._v("回复")]),o("div",{staticClass:"text"},[o("a",{attrs:{href:"#comment-"+e.parentCommentId}},[t._v("@"+t._s(e.parentCommentNickname))]),o("div",{domProps:{innerHTML:t._s(e.content)}})])],1),t.parentCommentId===e.id?o("CommentForm"):t._e()],1)})),0):t._e(),o("div",{staticClass:"border"}),t.parentCommentId===e.id?o("CommentForm"):t._e()],1)}))],2)},r=[],s=o("2f62"),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form"},[o("h3",[t._v(" 发表评论 "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!==t.parentCommentId,expression:"parentCommentId!==-1"}],staticClass:"m-small",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.$store.commit(t.SET_PARENT_COMMENT_ID,-1)}}},[t._v("取消回复")])],1),o("el-form",{ref:"formRef",attrs:{inline:!0,model:t.commentForm,rules:t.formRules,size:"small"}},[o("el-input",{class:"textarea",attrs:{type:"textarea",rows:5,placeholder:"评论千万条，友善第一条",maxlength:"250","show-word-limit":"","validate-event":!1},model:{value:t.commentForm.content,callback:function(e){t.$set(t.commentForm,"content",e)},expression:"commentForm.content"}}),o("div",{staticClass:"el-form-item el-form-item--small emoji"},[o("img",{attrs:{src:"https://cdn.naccl.top/blog/img/paopao/1.png"},on:{click:t.showEmojiBox}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.emojiShow,expression:"emojiShow"}],staticClass:"mask",on:{click:t.hideEmojiBox}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.emojiShow,expression:"emojiShow"}],staticClass:"emoji-box"},[o("div",{staticClass:"emoji-title"},[o("span",[t._v(t._s(0===t.activeEmojiTab?"tv_小电视":1===t.activeEmojiTab?"阿鲁":"泡泡"))])]),o("div",{directives:[{name:"show",rawName:"v-show",value:0===t.activeEmojiTab,expression:"activeEmojiTab===0"}],staticClass:"emoji-wrap"},t._l(t.tvMapper,(function(e,n){return o("div",{key:n,staticClass:"emoji-list",on:{click:function(o){return t.insertEmoji(e.name)}}},[o("img",{attrs:{src:e.src,title:e.name}})])})),0),o("div",{directives:[{name:"show",rawName:"v-show",value:1===t.activeEmojiTab,expression:"activeEmojiTab===1"}],staticClass:"emoji-wrap"},t._l(t.aruMapper,(function(e,n){return o("div",{key:n,staticClass:"emoji-list",on:{click:function(o){return t.insertEmoji(e.name)}}},[o("img",{attrs:{src:e.src,title:e.name}})])})),0),o("div",{directives:[{name:"show",rawName:"v-show",value:2===t.activeEmojiTab,expression:"activeEmojiTab===2"}],staticClass:"emoji-wrap"},t._l(t.paopaoMapper,(function(e,n){return o("div",{key:n,staticClass:"emoji-list",on:{click:function(o){return t.insertEmoji(e.name)}}},[o("img",{attrs:{src:e.src,title:e.name}})])})),0),o("div",{staticClass:"emoji-tabs"},[o("a",{staticClass:"tab-link",class:{on:0===t.activeEmojiTab},on:{click:function(e){t.activeEmojiTab=0}}},[o("img",{attrs:{src:"https://cdn.naccl.top/blog/img/tv/1.png"}})]),o("a",{staticClass:"tab-link",class:{on:1===t.activeEmojiTab},on:{click:function(e){t.activeEmojiTab=1}}},[o("img",{attrs:{src:"https://cdn.naccl.top/blog/img/aru/1.png"}})]),o("a",{staticClass:"tab-link",class:{on:2===t.activeEmojiTab},on:{click:function(e){t.activeEmojiTab=2}}},[o("img",{attrs:{src:"https://cdn.naccl.top/blog/img/paopao/1.png"}})])])])]),o("el-form-item",{attrs:{prop:"nickname"}},[o("el-popover",{ref:"nicknamePopover",attrs:{placement:"bottom",trigger:"focus",content:"输入QQ号将自动拉取昵称和头像"}}),o("el-input",{directives:[{name:"popover",rawName:"v-popover:nicknamePopover",arg:"nicknamePopover"}],attrs:{placeholder:"昵称（必填）","validate-event":!1},model:{value:t.commentForm.nickname,callback:function(e){t.$set(t.commentForm,"nickname",e)},expression:"commentForm.nickname"}},[o("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),o("el-form-item",{attrs:{prop:"email"}},[o("el-popover",{ref:"emailPopover",attrs:{placement:"bottom",trigger:"focus",content:"用于接收回复邮件"}}),o("el-input",{directives:[{name:"popover",rawName:"v-popover:emailPopover",arg:"emailPopover"}],attrs:{placeholder:"邮箱（必填）","validate-event":!1},model:{value:t.commentForm.email,callback:function(e){t.$set(t.commentForm,"email",e)},expression:"commentForm.email"}},[o("i",{staticClass:"el-input__icon el-icon-message",attrs:{slot:"prefix"},slot:"prefix"})])],1),o("el-form-item",{attrs:{prop:"website"}},[o("el-popover",{ref:"websitePopover",attrs:{placement:"bottom",trigger:"focus",content:"可以让我参观一下吗😊"}}),o("el-input",{directives:[{name:"popover",rawName:"v-popover:websitePopover",arg:"websitePopover"}],attrs:{placeholder:"https://（可选）","validate-event":!1},model:{value:t.commentForm.website,callback:function(e){t.$set(t.commentForm,"website",e)},expression:"commentForm.website"}},[o("i",{staticClass:"el-input__icon el-icon-map-location",attrs:{slot:"prefix"},slot:"prefix"})])],1),o("el-form-item",{attrs:{label:"订阅回复"}},[o("el-switch",{model:{value:t.commentForm.notice,callback:function(e){t.$set(t.commentForm,"notice",e)},expression:"commentForm.notice"}})],1),o("el-form-item",[o("el-button",{directives:[{name:"throttle",rawName:"v-throttle",value:[t.postForm,"click",3e3],expression:"[postForm,`click`,3000]"}],attrs:{type:"primary",size:"medium"}},[t._v("发表评论")])],1)],1)],1)},m=[],l=function(t,e,o){var n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(n.test(e))return o();o(new Error("请输入合法的邮箱"))},p=function(t,e,o){var n=/^https?:\/\/([^!@#$%^&*?.\s-]([^!@#$%^&*?.\s]{0,63}[^!@#$%^&*?.\s])?\.)+[a-z]{2,6}\/?/;if(n.test(e))return o();o(new Error("请输入合法的 URL"))},u=o("4ba1"),v=o("1d41"),d=o("3494"),f=o("848a");function b(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function h(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?b(Object(o),!0).forEach((function(e){g(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):b(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function g(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var w=function(t,e,o){if(e)return p(t,e,o);o()},j={name:"CommentForm",computed:h({},Object(s["b"])(["parentCommentId","commentForm","commentQuery"])),data:function(){return{SET_PARENT_COMMENT_ID:u["o"],formRules:{nickname:[{required:!0,message:"请输入评论昵称"},{max:18,message:"昵称不可多于15个字符"}],email:[{required:!0,message:"请输入评论邮箱"},{validator:l}],website:[{required:!1},{validator:w}]},emojiShow:!1,activeEmojiTab:0,tvMapper:[],aruMapper:[],paopaoMapper:[],textarea:null,start:0,end:0}},created:function(){this.tvMapper=v,this.aruMapper=d,this.paopaoMapper=f},mounted:function(){this.textarea=document.querySelector(".el-form textarea")},methods:{showEmojiBox:function(){this.start=this.textarea.selectionStart,this.end=this.textarea.selectionEnd,this.textarea.focus(),this.textarea.setSelectionRange(this.start,this.end),this.emojiShow=!this.emojiShow},insertEmoji:function(t){var e=this,o=this.commentForm.content;this.commentForm.content=o.substring(0,this.start)+t+o.substring(this.end),this.start+=t.length,this.end=this.start,this.textarea.focus(),this.$nextTick((function(){e.textarea.setSelectionRange(e.start,e.end)}))},hideEmojiBox:function(){this.emojiShow=!1,this.textarea.focus(),this.textarea.setSelectionRange(this.start,this.end)},postForm:function(){var t=this,e=window.localStorage.getItem("adminToken");if(e)return""===this.commentForm.content||this.commentForm.content.length>250?this.$notify({title:"评论失败",message:"评论内容有误",type:"warning"}):this.$store.dispatch("submitCommentForm",e);var o=window.localStorage.getItem("blog".concat(this.commentQuery.blogId));this.$refs.formRef.validate((function(e){!e||""===t.commentForm.content||t.commentForm.content.length>250?t.$notify({title:"评论失败",message:"请正确填写评论",type:"warning"}):t.$store.dispatch("submitCommentForm",o||"")}))}}},C=j,y=(o("075c"),o("2877")),_=Object(y["a"])(C,c,m,!1,null,null,null),O=_.exports;function k(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function x(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?k(Object(o),!0).forEach((function(e){P(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function P(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var E={name:"Comment",components:{CommentForm:O},computed:x({},Object(s["b"])(["allComment","closeComment","comments","parentCommentId"])),methods:{setReply:function(t){this.$store.commit(u["o"],t)}}},F=E,$=(o("3815"),Object(y["a"])(F,a,r,!1,null,"18546ec2",null)),T=$.exports,S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.commentQuery.pageNum,"page-count":t.commentTotalPage,layout:"prev, pager, next",background:"","hide-on-single-page":""},on:{"current-change":t.handleCurrentChange}})},M=[];function D(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function N(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?D(Object(o),!0).forEach((function(e){I(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):D(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function I(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var R={name:"Pagination",computed:N({},Object(s["b"])(["commentQuery","commentTotalPage"])),methods:{handleCurrentChange:function(t){this.$store.commit(u["k"],t),this.$store.commit(u["o"],-1),this.$store.dispatch("getCommentList")}}},z=R,Y=(o("4752"),Object(y["a"])(z,S,M,!1,null,"5bc58a75",null)),q=Y.exports,A={name:"CommentList",components:{Comment:T,Pagination:q},props:{page:{type:Number,required:!0},blogId:{type:Number,required:!1}},created:function(){this.init()},watch:{"$route.path":function(){this.init()}},methods:{init:function(){this.$store.commit(u["o"],-1),this.$store.commit(u["j"],this.page),this.$store.commit(u["i"],this.blogId),this.$store.commit(u["k"],1),this.$store.dispatch("getCommentList")}}},H=A,L=Object(y["a"])(H,n,i,!1,null,"d0718afc",null);e["a"]=L.exports},3815:function(t,e,o){"use strict";o("491a")},4752:function(t,e,o){"use strict";o("731d")},"491a":function(t,e,o){},"731d":function(t,e,o){},a78e:function(t,e,o){}}]);
//# sourceMappingURL=chunk-58f70ef0.fe7c7936.js.map